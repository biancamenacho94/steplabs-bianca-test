{% comment %}
Section 2 — Backed by Science (N metric groups)
- Dos columnas (Media izquierda | Contenido derecha)
- Bloques dinámicos:
  • Media (máx. 1)
  • Metrics Group (ilimitados): encabezado + 2 métricas (A/B)
- Todo editable desde el Theme Editor
- Sin CSS inline; estilos en /assets/section-2.css
{% endcomment %}

{{ 'section-2.css' | asset_url | stylesheet_tag }}

<section class="s2">
  <div class="s2__container">
    {%- comment %} COLUMNA: MEDIA (usa el primer bloque Media si existe) {% endcomment -%}
    <div class="s2__media">
      {%- assign media_blocks = section.blocks | where: 'type', 'media' -%}
      {%- if media_blocks.size > 0 -%}
        {%- assign m = media_blocks.first -%}
        {%- if m.settings.image != blank -%}
          {{ m.settings.image
            | image_url: width: 1800
            | image_tag:
              alt: m.settings.image_alt,
              loading: 'lazy',
              class: 's2__image' }}
        {%- else -%}
          <div class="s2__image--placeholder" aria-hidden="true"></div>
        {%- endif -%}
      {%- endif -%}
    </div>

    {%- comment %} COLUMNA: CONTENIDO {% endcomment -%}
    <div class="s2__content">
      {%- if section.settings.title != blank -%}
        <h2 class="s2__title">{{ section.settings.title }}</h2>
      {%- endif -%}

      {%- if section.settings.subtitle != blank -%}
        <p class="s2__subtitle"><em>{{ section.settings.subtitle }}</em></p>
      {%- endif -%}

      {%- comment -%} BLOQUES: METRICS GROUP (encabezado + 2 métricas) {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- if block.type == 'metrics_group' -%}
          <article class="s2__group" {{ block.shopify_attributes }}>
            {%- if block.settings.show_top_rule -%}
              <div class="s2__rule" aria-hidden="true"></div>
            {%- endif -%}

            {%- if block.settings.group_heading != blank -%}
              <p class="s2__group-heading">{{ block.settings.group_heading }}</p>
            {%- endif -%}

            <div class="s2__stats">
              <div class="s2__stat">
                {%- if block.settings.eyebrow_a != blank -%}
                  <p class="s2__eyebrow">{{ block.settings.eyebrow_a }}</p>
                {%- endif -%}
                {%- if block.settings.value_a != blank -%}
                  <div class="s2__value">{{ block.settings.value_a }}</div>
                {%- endif -%}
                {%- if block.settings.desc_a != blank -%}
                  <p class="s2__desc">{{ block.settings.desc_a }}</p>
                {%- endif -%}
              </div>

              <div class="s2__stat">
                {%- if block.settings.eyebrow_b != blank -%}
                  <p class="s2__eyebrow">{{ block.settings.eyebrow_b }}</p>
                {%- endif -%}
                {%- if block.settings.value_b != blank -%}
                  <div class="s2__value ">{{ block.settings.value_b }}</div>
                {%- endif -%}
                {%- if block.settings.desc_b != blank -%}
                  <p class="s2__desc">{{ block.settings.desc_b }}</p>
                {%- endif -%}
              </div>
            </div>
          </article>
        {%- endif -%}
      {%- endfor -%}

      {%- if section.settings.button_label != blank and section.settings.button_link != blank -%}
        <a class="s2__button"
           href="{{ section.settings.button_link }}"
           {% if section.settings.button_new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
          {{ section.settings.button_label }}
          <span aria-hidden="true" class="s2__button-icon">↗</span>
        </a>
      {%- endif -%}

      {%- if section.settings.footnotes != blank -%}
        <div class="s2__footnotes rte">{{ section.settings.footnotes }}</div>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Section 2",
  "tag": "section",
  "class": "section-2",
  "settings": [
    { "type": "text", "id": "title", "label": "Title" },
    { "type": "text", "id": "subtitle", "label": "Subtitle (italic)" },

    { "type": "text", "id": "button_label", "label": "Button label" },
    { "type": "url", "id": "button_link", "label": "Button link" },
    { "type": "checkbox", "id": "button_new_tab", "label": "Open in new tab", "default": true },

    { "type": "richtext", "id": "footnotes", "label": "Footnotes (small text)" }
  ],
  "blocks": [
    {
      "type": "media",
      "name": "Media",
      "limit": 1,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "image_alt", "label": "Image alt text", "default": "Product image" }
      ]
    },
    {
      "type": "metrics_group",
      "name": "Metrics Group",
      "settings": [
        { "type": "text", "id": "group_heading", "label": "Group heading" },
        { "type": "checkbox", "id": "show_top_rule", "label": "Show top rule (divider)", "default": true },

        { "type": "text", "id": "eyebrow_a", "label": "Metric A — eyebrow",  },
        { "type": "text", "id": "value_a", "label": "Metric A — value",  },
        { "type": "textarea", "id": "desc_a", "label": "Metric A — description" },
        { "type": "text", "id": "eyebrow_b", "label": "Metric B — eyebrow"},
        { "type": "text", "id": "value_b", "label": "Metric B — value" },
        { "type": "textarea", "id": "desc_b", "label": "Metric B — description" }
    
      ]
    }
  ],
  "presets": [
    {
      "name": "Section 2",
      "blocks": [
        { "type": "media" },
        { "type": "metrics_group" },
        { "type": "metrics_group", "settings": { "group_heading": "CLINICALLY SHOWN TO SPEED UP RECOVERY" } }
      ]
    }
  ]
}
{% endschema %}

{% javascript %}{% endjavascript %}